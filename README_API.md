# ç”¨æˆ·ç”»åƒæ ‡ç­¾æå–API

## ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# å®‰è£…ä¾èµ–
bun install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun run dev
```

## ğŸ“¡ APIæ¥å£

### æå–ç”¨æˆ·ç”»åƒæ ‡ç­¾

**POST** `/api/user-profile/extract-tags`

#### è¯·æ±‚å‚æ•°

```json
{
  "user_id": "6cef471f-5e2c-4c5a-97a1-d0083062348d",
  "user_introduces": "æ¥è‡ªæµå—ï¼Œå–œæ¬¢æ‰“ç¯®çƒï¼ŒèŒä¸šæ˜¯å¤–å–å‘˜ï¼Œå–œæ¬¢çš„å¯¹è±¡æ˜¯è‚¤ç™½è²Œç¾å¤§é•¿è…¿",
  "user_sex": "ç”·",
  "user_age": 26
}
```

#### å‚æ•°è¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|------|------|------|------|
| user_id | string (UUID) | ç”¨æˆ·å”¯ä¸€æ ‡è¯† | âœ… |
| user_introduces | string | ç”¨æˆ·è‡ªæˆ‘ä»‹ç» | âœ… |
| user_sex | enum('ç”·', 'å¥³', 'å…¶ä»–') | ç”¨æˆ·æ€§åˆ« | âœ… |
| user_age | number (1-150) | ç”¨æˆ·å¹´é¾„ | âœ… |

#### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "{\"hobbies\": [\"ç¯®çƒ\"], \"occupation\": \"å¤–å–å‘˜\", \"location\": \"æµå—\", \"preferences\": [\"è‚¤ç™½è²Œç¾å¤§é•¿è…¿\"], \"personality\": [], \"other\": []}"
}
```

#### é”™è¯¯å“åº”

```json
{
  "code": 400,
  "message": "å‚æ•°æ ¡éªŒå¤±è´¥",
  "errors": [...]
}
```

## ğŸ§ª æµ‹è¯•

### ä½¿ç”¨curlæµ‹è¯•

```bash
curl -X POST http://localhost:3000/api/user-profile/extract-tags \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "6cef471f-5e2c-4c5a-97a1-d0083062348d",
    "user_introduces": "æ¥è‡ªæµå—ï¼Œå–œæ¬¢æ‰“ç¯®çƒï¼ŒèŒä¸šæ˜¯å¤–å–å‘˜ï¼Œå–œæ¬¢çš„å¯¹è±¡æ˜¯è‚¤ç™½è²Œç¾å¤§é•¿è…¿",
    "user_sex": "ç”·",
    "user_age": 26
  }'
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ logger.ts          # Winstonæ—¥å¿—é…ç½®
â”‚   â””â”€â”€ config.ts          # é…ç½®æœåŠ¡
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ extract.controller.ts    # APIæ§åˆ¶å™¨
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ extract.ts         # è·¯ç”±å®šä¹‰
â”œâ”€â”€ services/
â”‚   â””â”€â”€ tagServices.ts     # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ types/
â”‚   â””â”€â”€ extractUserProfileTag.ts  # ç±»å‹å®šä¹‰
â””â”€â”€ index.ts               # åº”ç”¨å…¥å£
```

## âœ¨ ç‰¹æ€§

- âœ… **å‚æ•°æ ¡éªŒ**: ä½¿ç”¨Zodè¿›è¡Œä¸¥æ ¼çš„å…¥å‚æ ¡éªŒ
- âœ… **æ—¥å¿—è®°å½•**: Winstonæ—¥å¿—ç³»ç»Ÿï¼Œè®°å½•è¯·æ±‚å’Œå“åº”
- âœ… **æ¨¡å—åŒ–**: æ¸…æ™°çš„åˆ†å±‚æ¶æ„
- âœ… **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… **TypeScript**: å®Œæ•´çš„ç±»å‹å®‰å…¨
- âœ… **é˜¿é‡Œäº‘å¤§æ¨¡å‹**: é›†æˆé€šä¹‰åƒé—®API

## ğŸ”§ ç¯å¢ƒé…ç½®

ç¡®ä¿`.env`æ–‡ä»¶åŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```env
apiBaseUrl=https://dashscope.aliyuncs.com/compatible-mode/v1
apiKey=your-api-key-here
```